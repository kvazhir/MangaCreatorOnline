<!DOCTYPE html>
<html>
<head>
<style>
body{
	background-color:#F8F7ED;
}

canvas{
	background-color:white;
}
</style>
<script>
	window.TP = {};

	TP.init = function(){
		var self = this;
		this.canvas = document.getElementById("canvas");
		this.ctx = canvas.getContext('2d');
		this.width = canvas.width;
		this.height = canvas.height;

		this.imageObj = new Image();
		this.imageObj.src = 'image.jpg';

		this.imageObj.onload = function(){
			self.renderImage(self.ctx, self.imageObj);
		};

		TP.renderImage = function(ctx, imageObj){
			//ctx.drawImage(imageObj, 10, 10);

			var sourceX = 0;
			var sourceY = 0;
			var sourceWidth = 500;
			var sourceHeight = 500;
			var destWidth = sourceWidth;
			var destHeight = sourceHeight;
			var destX = 0;
			var destY = 0;

			ctx.drawImage(
				imageObj,
				sourceX,
				sourceY,
				sourceWidth,
				sourceHeight,
				destX,
				destY,
				destWidth,
				destHeight
			);

			var imageData = ctx.getImageData(
				destX, destY, destWidth, destHeight
			);
			var data = imageData.data;
			console.log(data);

			/*for(var i = 0; i < data.length; i+=4){
				//GRAY SCALE!!!
				var brightness = 0.34 * data[i] + 0.5 * data[i+1] + 0.16 * data[i+2];

				//red
				data[i] = brightness;

				//green
				data[i+1] = brightness;

				//blue
				data[i+2] = brightness;

				//opacity
				//data[i+3];
			}*/
			//overwrite original image
			ctx.putImageData(imageData, destX, destY);

			var dataURL = this.canvas.toDataURL();
			imageObj.src = dataURL;
			console.log(dataURL);
		}

	}

</script>
</head>

<body onload="TP.init()">
<h3>Just a random Canvas Tut6</h3>
<canvas id="canvas" width="850px" height="850px" style="border:1px solid black;">
<p>No canvas...</p>
</canvas>
</body>
</html>
